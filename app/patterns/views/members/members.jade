header
  //- include ../partials/breadcrumbs
  section.summary
    h1 Member List

section(class="members")
  h2 #{app.toolbox.numeral(count).format('0,0')} #{ term ? 'Matches for "' + term + '"' : group.name }
  include ../partials/pagination
  nav.groups
    ul#group-menu
      each group in groups
        li(class="group-#{group.id} #{group.url} #{ group.id == url.group ? 'current' : '' }")
          a(href="members/#{group.url}/group/#{group.id}")
            = group.name
    form(action="members/action/search#{ url.group ? '/group/' + url.group : '' }" method="post" novalidate)
      ul.data
        li.term.text
          input(id="term" name="term" type="text" placeholder="Username search" value="#{form.term}")
      ul.actions
        li.primary
          input(id="submit" name="submit" type="submit" value="Search")
  section.list
    table
      thead
        tr
          th(class="username #{ !url.order || url.order === 'username' ? 'selected' : '' }") <a href="members#{urlParams}#{ url.order === 'username' && url.sort === 'asc' ? 'order/username/sort/desc' : 'order/username/sort/asc' }">Username</a>
          th.group Group
          th(class="join-date #{ url.order === 'join-date' ? 'selected' : '' }") <a href="members#{urlParams}#{ url.order === 'join-date' && url.sort === 'asc' ? 'order/join-date/sort/desc' : 'order/join-date/sort/asc' }">Join Date</a>
          th.last-active <a href="members#{urlParams}#{ url.order === 'last-active' && url.sort === 'desc' ? 'order/last-active/sort/asc' : 'order/last-active/sort/desc' }">Last Active</a>
      tbody
        each member in members
          tr
            td.username
              a(href="user/#{member.url}/id/#{member.id}")
                = member.username
            td.group
              = member.name
            td.join-date
              = app.toolbox.moment.tz(member.joined, session.timezone).format(session.dateFormat)
            td.last-active
              = app.toolbox.moment.tz(member.lastActivity, session.timezone).format(session.dateFormat)
    include ../partials/previous-and-next
