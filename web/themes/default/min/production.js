window.Modernizr=function(r,d,o){function e(e){u.cssText=e}function i(e,t){return typeof e===t}function c(e,t){for(var n in e){var r=e[n];if(!~(""+r).indexOf("-")&&u[r]!==o)return"pfx"!=t||r}return!1}function t(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+h.join(r+" ")+r).split(" ");return i(t,"string")||i(t,"undefined")?c(a,t):function(e,t,n){for(var r in e){var a=t[e[r]];if(a!==o)return!1===n?e[r]:i(a,"function")?a.bind(n||t):a}return!1}(a=(e+" "+v.join(r+" ")+r).split(" "),t,n)}var n,a,s={},f=d.documentElement,m="modernizr",l=d.createElement(m),u=l.style,p="Webkit Moz O ms",h=p.split(" "),v=p.toLowerCase().split(" "),g={},y=[],E=y.slice,C=function(e,t,n,r){var a,o,i,c,s=d.createElement("div"),l=d.body,u=l||d.createElement("body");if(parseInt(n,10))for(;n--;)(i=d.createElement("div")).id=r?r[n]:m+(n+1),s.appendChild(i);return a=["&#173;",'<style id="s',m,'">',e,"</style>"].join(""),s.id=m,(l?s:u).innerHTML+=a,u.appendChild(s),l||(u.style.background="",u.style.overflow="hidden",c=f.style.overflow,f.style.overflow="hidden",f.appendChild(u)),o=t(s,e),l?s.parentNode.removeChild(s):(u.parentNode.removeChild(u),f.style.overflow=c),!!o},b={}.hasOwnProperty;for(var x in a=i(b,"undefined")||i(b.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(e,t){return b.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(r){var a=this;if("function"!=typeof a)throw new TypeError;var o=E.call(arguments,1),i=function(){if(this instanceof i){var e=function(){};e.prototype=a.prototype;var t=new e,n=a.apply(t,o.concat(E.call(arguments)));return Object(n)===n?n:t}return a.apply(r,o.concat(E.call(arguments)))};return i}),g.flexbox=function(){return t("flexWrap")},g.canvas=function(){var e=d.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},g.canvastext=function(){return!!s.canvas&&!!i(d.createElement("canvas").getContext("2d").fillText,"function")},g.cssanimations=function(){return t("animationName")},g.csstransforms=function(){return!!t("transform")},g.csstransitions=function(){return t("transition")},g)a(g,x)&&(n=x.toLowerCase(),s[n]=g[x](),y.push((s[n]?"":"no-")+n));return s.addTest=function(e,t){if("object"==typeof e)for(var n in e)a(e,n)&&s.addTest(n,e[n]);else{if(e=e.toLowerCase(),s[e]!==o)return s;t="function"==typeof t?t():t,f.className+=" "+(t?"":"no-")+e,s[e]=t}return s},e(""),l=null,function(e,s){function l(){var e=p.elements;return"string"==typeof e?e.split(" "):e}function u(e){var t=c[e[r]];return t||(t={},i++,e[r]=i,c[i]=t),t}function d(e,t,n){return t||(t=s),m?t.createElement(e):(n||(n=u(t)),!(r=n.cache[e]?n.cache[e].cloneNode():o.test(e)?(n.cache[e]=n.createElem(e)).cloneNode():n.createElem(e)).canHaveChildren||a.test(e)||r.tagUrn?r:n.frag.appendChild(r));var r}function t(e){e||(e=s);var t,n,r,a,o,i,c=u(e);return p.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=(a="article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}",o=(r=e).createElement("p"),i=r.getElementsByTagName("head")[0]||r.documentElement,o.innerHTML="x<style>"+a+"</style>",!!i.insertBefore(o.lastChild,i.firstChild))),m||(t=e,(n=c).cache||(n.cache={},n.createElem=t.createElement,n.createFrag=t.createDocumentFragment,n.frag=n.createFrag()),t.createElement=function(e){return p.shivMethods?d(e,t,n):n.createElem(e)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/[\w\-]+/g,function(e){return n.createElem(e),n.frag.createElement(e),'c("'+e+'")'})+");return n}")(p,n.frag)),e}var f,m,n=e.html5||{},a=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,o=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,r="_html5shiv",i=0,c={};!function(){try{var e=s.createElement("a");e.innerHTML="<xyz></xyz>",f="hidden"in e,m=1==e.childNodes.length||function(){s.createElement("a");var e=s.createDocumentFragment();return void 0===e.cloneNode||void 0===e.createDocumentFragment||void 0===e.createElement}()}catch(e){m=f=!0}}();var p={elements:n.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:"3.7.0",shivCSS:!1!==n.shivCSS,supportsUnknownElements:m,shivMethods:!1!==n.shivMethods,type:"default",shivDocument:t,createElement:d,createDocumentFragment:function(e,t){if(e||(e=s),m)return e.createDocumentFragment();for(var n=(t=t||u(e)).frag.cloneNode(),r=0,a=l(),o=a.length;r<o;r++)n.createElement(a[r]);return n}};e.html5=p,t(s)}(this,d),s._version="2.8.3",s._domPrefixes=v,s._cssomPrefixes=h,s.mq=function(e){var t,n=r.matchMedia||r.msMatchMedia;return n?n(e)&&n(e).matches||!1:(C("@media "+e+" { #"+m+" { position: absolute; } }",function(e){t="absolute"==(r.getComputedStyle?getComputedStyle(e,null):e.currentStyle).position}),t)},s.testProp=function(e){return c([e])},s.testAllProps=t,s.testStyles=C,f.className=f.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+" js "+y.join(" "),s}(this,this.document),Modernizr.addTest("emoji",function(){if(!Modernizr.canvastext)return!1;var e=document.createElement("canvas").getContext("2d");return e.textBaseline="top",e.font="32px Arial",e.fillText("ðŸ˜ƒ",0,0),0!==e.getImageData(16,16,1,1).data[0]});
window.matchMedia=window.matchMedia||function(e){"use strict";var t,n=e.documentElement,a=n.firstElementChild||n.firstChild,s=e.createElement("body"),i=e.createElement("div");return i.id="mq-test-1",i.style.cssText="position:absolute;top:-100em",s.style.background="none",s.appendChild(i),function(e){return i.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',n.insertBefore(s,a),t=42===i.offsetWidth,n.removeChild(s),{matches:t,media:e}}}(document),function(v){"use strict";function e(){O(!0)}var t={};if((v.respond=t).update=function(){},t.mediaQueriesSupported=v.matchMedia&&v.matchMedia("only all").matches,!t.mediaQueriesSupported){var g,x,E,w=v.document,T=w.documentElement,C=[],S=[],$=[],i={},b=w.getElementsByTagName("head")[0]||T,r=w.getElementsByTagName("base")[0],R=b.getElementsByTagName("link"),o=[],n=function(){for(var e=0;R.length>e;e++){var t=R[e],n=t.href,a=t.media,s=t.rel&&"stylesheet"===t.rel.toLowerCase();n&&s&&!i[n]&&(t.styleSheet&&t.styleSheet.rawCssText?(d(t.styleSheet.rawCssText,n,a),i[n]=!0):(!/^([a-zA-Z:]*\/\/)/.test(n)&&!r||n.replace(RegExp.$1,"").split("/")[0]===v.location.host)&&o.push({href:n,media:a}))}l()},l=function(){if(o.length){var t=o.shift();a(t.href,function(e){d(e,t.href,t.media),i[t.href]=!0,v.setTimeout(function(){l()},0)})}},d=function(e,t,n){var a=e.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),s=a&&a.length||0,i=function(e){return e.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+t+"$2$3")},r=!s&&n;(t=t.substring(0,t.lastIndexOf("/"))).length&&(t+="/"),r&&(s=1);for(var o=0;o<s;o++){var l,d,m,h;r?(l=n,S.push(i(e))):(l=a[o].match(/@media *([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1,S.push(RegExp.$2&&i(RegExp.$2))),h=(m=l.split(",")).length;for(var u=0;u<h;u++)d=m[u],C.push({media:d.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/)&&RegExp.$2||"all",rules:S.length-1,hasquery:-1<d.indexOf("("),minw:d.match(/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:d.match(/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}O()},M=function(){var e,t=w.createElement("div"),n=w.body,a=!1;return t.style.cssText="position:absolute;font-size:1em;width:1em",n||((n=a=w.createElement("body")).style.background="none"),n.appendChild(t),T.insertBefore(n,T.firstChild),e=t.offsetWidth,a?T.removeChild(n):n.removeChild(t),E=parseFloat(e)},O=function(e){var t="clientWidth",n=T[t],a="CSS1Compat"===w.compatMode&&n||w.body[t]||n,s={},i=R[R.length-1],r=(new Date).getTime();if(e&&g&&r-g<30)return v.clearTimeout(x),void(x=v.setTimeout(O,30));for(var o in g=r,C)if(C.hasOwnProperty(o)){var l=C[o],d=l.minw,m=l.maxw,h=null===d,u=null===m;d&&(d=parseFloat(d)*(-1<d.indexOf("em")?E||M():1)),m&&(m=parseFloat(m)*(-1<m.indexOf("em")?E||M():1)),l.hasquery&&(h&&u||!(h||d<=a)||!(u||a<=m))||(s[l.media]||(s[l.media]=[]),s[l.media].push(S[l.rules]))}for(var c in $)$.hasOwnProperty(c)&&$[c]&&$[c].parentNode===b&&b.removeChild($[c]);for(var p in s)if(s.hasOwnProperty(p)){var f=w.createElement("style"),y=s[p].join("\n");f.type="text/css",f.media=p,b.insertBefore(f,i.nextSibling),f.styleSheet?f.styleSheet.cssText=y:f.appendChild(w.createTextNode(y)),$.push(f)}},a=function(e,t){var n=s();n&&(n.open("GET",e,!0),n.onreadystatechange=function(){4!==n.readyState||200!==n.status&&304!==n.status||t(n.responseText)},4!==n.readyState&&n.send(null))},s=function(){var t=!1;try{t=new v.XMLHttpRequest}catch(e){t=new v.ActiveXObject("Microsoft.XMLHTTP")}return function(){return t}}();n(),t.update=n,v.addEventListener?v.addEventListener("resize",e,!1):v.attachEvent&&v.attachEvent("onresize",e)}}(this);
window.CF={params:{device:{hiRes:!0,relativeSize:"small"}},boundEvents:{internalLinks:!1,viewportResize:!1}},CF.immediate=function(i,s){"use strict";var e={init:function(){e.responsiveModeSet()},responsiveModeSet:function(){var e=document.querySelector("html");i.mq("only screen and (min-width: 720px)")?s.params.device.relativeSize="x-large":i.mq("only screen and (min-width: 600px)")?s.params.device.relativeSize="large":i.mq("only screen and (min-width: 500px)")&&(s.params.device.relativeSize="medium"),e.setAttribute("data-relative-size",s.params.device.relativeSize),e.classList?(e.classList.remove("small"),e.classList.remove("medium"),e.classList.remove("large"),e.classList.remove("x-large"),e.classList.add(s.params.device.relativeSize)):e.className=e.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")+" "+s.params.device.relativeSize}};return{init:e.init,responsiveModeSet:e.responsiveModeSet}}(Modernizr,CF),CF.immediate.init();
CF.discussion=function(i,n){"use strict";return{init:function(){}}}(Modernizr,CF);
CF.discussions=function(i,n){"use strict";return{init:function(){}}}(Modernizr,CF);
CF.global=function(e,l){"use strict";var c={init:function(){var t,e,n=document.querySelector("body"),a=0,s=document.querySelector("body > header"),o=document.querySelector("main"),i=s.querySelector("nav ul.account");n.className="floating-header",o.style.paddingTop=s.getBoundingClientRect().height-1+"px",window.addEventListener("scroll",function(e){a>n.getBoundingClientRect().top&&Math.abs(n.getBoundingClientRect().top)>s.getBoundingClientRect().height&&!c.hasClass(n,"floating-header-hidden")?(c.removeClass(n,"floating-header-active"),n.className+=" floating-header-hidden"):n.getBoundingClientRect().top>a&&(c.removeClass(n,"floating-header-hidden"),c.hasClass(n,"floating-header-active")||(n.className+=" floating-header-active")),0===n.getBoundingClientRect().top&&(n.className="floating-header"),a=n.getBoundingClientRect().top}),(e=document.createElement("div")).setAttribute("id","main-menu-icon"),e.appendChild(document.createTextNode("Menu")),s.insertBefore(e,s.querySelector("a.home")),c.menu({menu:"header nav",trigger:"#main-menu-icon",position:"left"}),"large"!==l.params.device.relativeSize&&"x-large"!==l.params.device.relativeSize||(i.addEventListener("mouseleave",function(e){t=setTimeout(function(){c.removeClass(i,"active")},500)},!1),i.addEventListener("mouseover",function(e){t&&clearTimeout(t)}),c.hasClass(s,"authenticated")&&(s.querySelector("a.account").addEventListener("click",function(e){c.hasClass(i,"active")?c.removeClass(i,"active"):i.className+=" active",e.preventDefault()}),window.addEventListener("scroll",function(e){c.hasClass(i,"active")&&c.removeClass(i,"active")}))),c.viewportResizeCheck("responsiveModeSet",l.immediate.responsiveModeSet)},collapseQuotes:function(){for(var e=document.body.querySelectorAll("section.content > blockquote"),t=function(t){var n=document.createElement("a");n.setAttribute("href","#"),n.classList.add("expand"),n.innerHTML="Expand",n.addEventListener("click",function(e){e.preventDefault(),t.classList.toggle("expanded"),"Expand"===n.innerHTML?n.innerHTML="Collapse":n.innerHTML="Expand"}),t.classList.add("nested"),t.appendChild(n)},n=0;n<e.length;n++)e[n].querySelector("blockquote")&&t(e[n])},menu:function(n){var a,s=document.querySelector("body");document.querySelector(n.trigger).addEventListener("click",function(){var e=document.querySelector(n.menu),t=document.createElement("div");a=e.cloneNode(!0),s.appendChild(a),t.className="menu-shadow",s.appendChild(t),!1===n.keepClass?a.className="slide-menu "+n.position:a.className+=" slide-menu "+n.position,c.hasClass(s,"menu-open")?(c.removeClass(s,"menu-open"),c.removeClass(a,"open"),s.className+=" menu-closing",setTimeout(function(){c.removeClass(s,"menu-closing")},200)):(s.className+=" menu-opening",setTimeout(function(){c.removeClass(s,"menu-opening"),s.className+=" menu-open",a.className+=" open"},200)),t.addEventListener("click",function(){c.removeClass(s,"menu-open"),c.removeClass(a,"open"),s.className+=" menu-closing",setTimeout(function(){c.removeClass(s,"menu-closing"),s.removeChild(t),null!==a.parentNode&&s.removeChild(a)},200)},!1)},!1)},hasClass:function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},toggleClass:function(e,t){c.hasClass(e,t)?c.removeClass(e,t):e.className+=" "+t},ajaxFormBinding:function(e){var s=document.querySelector(e.formSelector),o=e.format||"json",i=e.type||"direct";s.addEventListener("submit",function(e){var t,n=new XMLHttpRequest,a=new FormData(s);e.preventDefault(),n.open("POST",s.action+"/format/"+o+"/type/"+i,!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(a),n.onreadystatechange=function(){console.log("readyState: "+n.readyState),console.log("status: "+n.status)},n.onload=function(){200<=n.status&&n.status<400&&(t=JSON.parse(n.responseText),console.log(t))},n.onerror=function(){}}),s.addEventListener("click",function(e){for(var t=document.createElement("input"),n=s.querySelectorAll('input[type="hidden"].submit-surrogate'),a=0;a<n.length;a++)s.removeChild(n[a]);e.target.type&&"submit"===e.target.type.toLowerCase()&&(t.name=e.target.name,t.type="hidden",t.value=e.target.value,t.className="submit-surrogate",s.appendChild(t))})},viewportResizeCheck:function(e,t){var n=document.body.clientWidth,a=0;window.addEventListener("resize",function(e){clearTimeout(a),a=setTimeout(function(){document.body.clientWidth!==n&&(n=document.body.clientWidth,t())},500)})}};return{collapseQuotes:c.collapseQuotes,init:c.init,menu:c.menu,hasClass:c.hasClass,removeClass:c.removeClass,ajaxFormBinding:c.ajaxFormBinding}}(Modernizr,CF);
CF.index=function(n,i){"use strict";return{init:function(){}}}(Modernizr,CF);
CF.init=function(){"use strict";var t=document.getElementsByTagName("body")[0],e=t.getAttribute("data-controller"),i=t.getAttribute("data-action"),n=t.getAttribute("data-view");CF.global.init(),CF[e]&&(CF[e].init(),CF[e][i]&&"function"==typeof CF[e][i]&&(CF[e][i](),CF[e][i][n]&&CF[e][i][n]()))},document.onreadystatechange=function(){"use strict";"interactive"===document.readyState&&CF.init()};
CF.post=function(i,t){"use strict";return{init:{init:function(){t.global.collapseQuotes()}}.init}}(Modernizr,CF);
CF.topic=function(e,t){"use strict";var n,o;return n={handler:function(){var r,e=document.querySelector("#quick-reply-form");e&&!t.global.hasClass(e.parentNode,"quote")&&o.postContent(),"x-large"===t.params.device.relativeSize&&((r=document.createElement("div")).setAttribute("id","mask"),document.body.appendChild(r),document.querySelectorAll("section.posts article.post section.content.post p > img, section.posts article.post section.content.post > img").forEach(function(e,t,n){var o=document.createElement("span"),a=document.createElement("span"),s=e.parentNode,c=e.getAttribute("src");o.classList.add("zoom"),a.classList.add("zoom-image"),o.appendChild(a),s.appendChild(o),s.insertBefore(o,e),a.appendChild(e),a.addEventListener("click",function(e){r.innerHTML='<div id="mask-close"></div><img src="'+c+'"><a class="open-tab" href="'+c+'" target="_blank">'+c+"</a>",document.querySelector("html").classList.add("mask-enabled"),r.classList.add("enabled"),r.querySelector("#mask-close").addEventListener("click",function(e){r.classList.add("closing"),document.querySelector("html").classList.remove("mask-enabled"),setTimeout(function(){r.classList.remove("closing","enabled"),r.innerHTML=""},200)})})}))},start:function(){o.postContent()},reply:function(){var e=document.querySelector("#topic-reply-form");e&&!t.global.hasClass(e.parentNode,"quote")&&o.postContent()}},{init:(o={init:function(){t.global.collapseQuotes()},postContent:function(){var t=document.getElementById("post-content"),n=t?t.value:"";t&&(t.addEventListener("focus",function(e){t.value===n&&(t.value="")}),t.addEventListener("blur",function(e){""===t.value&&(t.value=n)}))}}).init,handler:n.handler,start:n.start,startPrivate:n.start,startAnnouncement:n.start,reply:n.reply}}(Modernizr,CF),CF.announcement=CF.topic;
CF.user=function(i,n){"use strict";return{init:{init:function(){n.global.collapseQuotes()}}.init}}(Modernizr,CF);
//# sourceMappingURL=production.js.map
