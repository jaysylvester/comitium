window.CF={},CF.immediate=function(){"use strict";return{init:{init:function(){document.querySelector("html").classList.add("js")}}.init}}(CF),CF.immediate.init();
CF.global=function(){"use strict";var c={init:function(){var e,n,t=document.querySelector("body"),i=0,s=document.querySelector("body > header"),o=s.querySelector("nav ul.account");window.addEventListener("scroll",function(){i>t.getBoundingClientRect().top&&Math.abs(t.getBoundingClientRect().top)>s.getBoundingClientRect().height&&!t.classList.contains("floating-header")?t.classList.add("floating-header"):(t.getBoundingClientRect().top>=i||Math.abs(t.getBoundingClientRect().top)<=s.getBoundingClientRect().height)&&t.classList.remove("floating-header"),i=t.getBoundingClientRect().top}),(n=document.createElement("div")).setAttribute("id","main-menu-icon"),n.innerHTML='<svg class="icon menu"><use xlink:href="themes/default/images/symbols.svg#icon-menu"></use></svg>',n.appendChild(document.createTextNode("Menu")),s.insertBefore(n,s.querySelector("a.home")),c.menu({menu:"header nav",trigger:"#main-menu-icon",position:"left"}),600<=document.body.clientWidth&&(o.addEventListener("mouseleave",function(){e=setTimeout(function(){o.classList.remove("active")},500)},!1),o.addEventListener("mouseover",function(){e&&clearTimeout(e)}),s.classList.contains("authenticated")&&(s.querySelector("a.account").addEventListener("click",function(e){600<=document.body.clientWidth&&e.preventDefault(),o.classList.contains("active")?o.classList.remove("active"):o.classList.add("active")}),window.addEventListener("scroll",function(){o.classList.contains("active")&&o.classList.remove("active")})))},collapseQuotes:function(){for(var e=document.body.querySelectorAll("section.content > blockquote"),n=function(n){var t=document.createElement("a");t.setAttribute("href","#"),t.classList.add("expand"),t.innerHTML="Expand",t.addEventListener("click",function(e){e.preventDefault(),n.classList.toggle("expanded"),"Expand"===t.innerHTML?t.innerHTML="Collapse":t.innerHTML="Expand"}),n.classList.add("nested"),n.appendChild(t)},t=0;t<e.length;t++)e[t].querySelector("blockquote")&&n(e[t])},menu:function(t){var i,s=document.querySelector("body");document.querySelector(t.trigger).addEventListener("click",function(){var e=document.querySelector(t.menu),n=document.createElement("div");i=e.cloneNode(!0),s.appendChild(i),n.className="menu-shadow",s.appendChild(n),!1===t.keepClass?i.className="slide-menu "+t.position:i.className+=" slide-menu "+t.position,s.classList.contains("menu-open")?(s.classList.remove("menu-open"),i.classList.remove("open"),s.classList.add("menu-closing"),setTimeout(function(){s.classList.remove("menu-closing")},200)):(s.classList.add("menu-opening"),setTimeout(function(){s.classList.remove("menu-opening"),s.classList.add("menu-open"),i.classList.add("open")},200)),n.addEventListener("click",function(){s.classList.remove("menu-open"),i.classList.remove("open"),s.classList.add("menu-closing"),setTimeout(function(){s.classList.remove("menu-closing"),s.removeChild(n),null!==i.parentNode&&s.removeChild(i)},200)},!1)},!1)}};return{collapseQuotes:c.collapseQuotes,init:c.init,menu:c.menu}}(CF);
CF.init=function(){"use strict";var t=document.getElementsByTagName("body")[0],e=t.getAttribute("data-controller"),i=t.getAttribute("data-action"),n=t.getAttribute("data-view");CF.global.init(),CF[e]&&(CF[e].init(),CF[e][i]&&"function"==typeof CF[e][i]&&(CF[e][i](),CF[e][i][n]&&CF[e][i][n]()))},document.onreadystatechange=function(){"use strict";"interactive"===document.readyState&&CF.init()};
CF.post=function(){"use strict";return{init:{init:function(){CF.global.collapseQuotes()}}.init}}(CF);
CF.topic=function(){"use strict";var e,t;return e={handler:function(){var i,e=document.querySelector("#quick-reply-form");e&&!e.parentNode.classList.contains("quote")&&t.postContent(),720<=document.body.clientWidth&&((i=document.createElement("div")).setAttribute("id","mask"),document.body.appendChild(i),document.querySelectorAll("section.posts article.post section.content.post p > img, section.posts article.post section.content.post > img").forEach(function(e){var t=document.createElement("span"),n=document.createElement("span"),s=document.createElement("span"),o=e.parentNode,a=e.getAttribute("src");t.classList.add("zoom"),n.classList.add("zoom-image"),t.appendChild(n),o.appendChild(t),o.insertBefore(t,e),s.classList.add("zoom-button"),s.innerHTML='<svg class="icon zoom-in"><use xlink:href="themes/default/images/symbols.svg#icon-zoom-in"></use></svg>',n.appendChild(e),n.appendChild(s),n.addEventListener("click",function(){i.innerHTML='<div id="mask-close"><svg class="icon close"><use xlink:href="themes/default/images/symbols.svg#icon-close"></use></svg></div><img src="'+a+'"><a class="open-tab" href="'+a+'" target="_blank">'+a+'<svg class="icon arrow-up-right"><use xlink:href="themes/default/images/symbols.svg#icon-arrow-up-right"></use></svg></a>',document.querySelector("html").classList.add("mask-enabled"),i.classList.add("enabled"),i.querySelector("#mask-close").addEventListener("click",function(){i.classList.add("closing"),document.querySelector("html").classList.remove("mask-enabled"),setTimeout(function(){i.classList.remove("closing","enabled"),i.innerHTML=""},200)})})}))},start:function(){t.postContent()},reply:function(){var e=document.querySelector("#topic-reply-form");e&&!e.parentNode.classList.contains("quote")&&t.postContent()}},{init:(t={init:function(){CF.global.collapseQuotes()},postContent:function(){var e=document.getElementById("post-content"),t=e?e.value:"";e&&(e.addEventListener("focus",function(){e.value===t&&(e.value="")}),e.addEventListener("blur",function(){""===e.value&&(e.value=t)}))}}).init,handler:e.handler,start:e.start,startPrivate:e.start,startAnnouncement:e.start,reply:e.reply}}(CF),CF.announcement=CF.topic;
CF.user=function(){"use strict";return{init:{init:function(){CF.global.collapseQuotes()}}.init}}(CF);
//# sourceMappingURL=site.js.map
