window.CF={},CF.immediate=function(){"use strict";return{init:{init:function(){document.querySelector("html").classList.add("js")}}.init}}(CF),CF.immediate.init();
CF.global=function(){"use strict";var c={init:function(){var e,t,n=document.querySelector("body"),i=0,o=document.querySelector("body > header"),s=o.querySelector("nav ul.account");window.addEventListener("scroll",function(){i>n.getBoundingClientRect().top&&Math.abs(n.getBoundingClientRect().top)>o.getBoundingClientRect().height&&!n.classList.contains("floating-header")?n.classList.add("floating-header"):(n.getBoundingClientRect().top>=i||Math.abs(n.getBoundingClientRect().top)<=o.getBoundingClientRect().height)&&n.classList.remove("floating-header"),i=n.getBoundingClientRect().top}),(t=document.createElement("div")).setAttribute("id","main-menu-icon"),t.appendChild(document.createTextNode("Menu")),o.insertBefore(t,o.querySelector("a.home")),c.menu({menu:"header nav",trigger:"#main-menu-icon",position:"left"}),600<=document.body.clientWidth&&(s.addEventListener("mouseleave",function(){e=setTimeout(function(){s.classList.remove("active")},500)},!1),s.addEventListener("mouseover",function(){e&&clearTimeout(e)}),o.classList.contains("authenticated")&&(o.querySelector("a.account").addEventListener("click",function(e){600<=document.body.clientWidth&&e.preventDefault(),s.classList.contains("active")?s.classList.remove("active"):s.classList.add("active")}),window.addEventListener("scroll",function(){s.classList.contains("active")&&s.classList.remove("active")})))},collapseQuotes:function(){for(var e=document.body.querySelectorAll("section.content > blockquote"),t=function(t){var n=document.createElement("a");n.setAttribute("href","#"),n.classList.add("expand"),n.innerHTML="Expand",n.addEventListener("click",function(e){e.preventDefault(),t.classList.toggle("expanded"),"Expand"===n.innerHTML?n.innerHTML="Collapse":n.innerHTML="Expand"}),t.classList.add("nested"),t.appendChild(n)},n=0;n<e.length;n++)e[n].querySelector("blockquote")&&t(e[n])},menu:function(n){var i,o=document.querySelector("body");document.querySelector(n.trigger).addEventListener("click",function(){var e=document.querySelector(n.menu),t=document.createElement("div");i=e.cloneNode(!0),o.appendChild(i),t.className="menu-shadow",o.appendChild(t),!1===n.keepClass?i.className="slide-menu "+n.position:i.className+=" slide-menu "+n.position,o.classList.contains("menu-open")?(o.classList.remove("menu-open"),i.classList.remove("open"),o.classList.add("menu-closing"),setTimeout(function(){o.classList.remove("menu-closing")},200)):(o.classList.add("menu-opening"),setTimeout(function(){o.classList.remove("menu-opening"),o.classList.add("menu-open"),i.classList.add("open")},200)),t.addEventListener("click",function(){o.classList.remove("menu-open"),i.classList.remove("open"),o.classList.add("menu-closing"),setTimeout(function(){o.classList.remove("menu-closing"),o.removeChild(t),null!==i.parentNode&&o.removeChild(i)},200)},!1)},!1)}};return{collapseQuotes:c.collapseQuotes,init:c.init,menu:c.menu}}(CF);
CF.init=function(){"use strict";var t=document.getElementsByTagName("body")[0],e=t.getAttribute("data-controller"),i=t.getAttribute("data-action"),n=t.getAttribute("data-view");CF.global.init(),CF[e]&&(CF[e].init(),CF[e][i]&&"function"==typeof CF[e][i]&&(CF[e][i](),CF[e][i][n]&&CF[e][i][n]()))},document.onreadystatechange=function(){"use strict";"interactive"===document.readyState&&CF.init()};
CF.post=function(){"use strict";return{init:{init:function(){CF.global.collapseQuotes()}}.init}}(CF);
CF.topic=function(){"use strict";var t,e;return t={handler:function(){var a,t=document.querySelector("#quick-reply-form");t&&!t.parentNode.classList.contains("quote")&&e.postContent(),720<=document.body.clientWidth&&((a=document.createElement("div")).setAttribute("id","mask"),document.body.appendChild(a),document.querySelectorAll("section.posts article.post section.content.post p > img, section.posts article.post section.content.post > img").forEach(function(t){var e=document.createElement("span"),n=document.createElement("span"),o=t.parentNode,s=t.getAttribute("src");e.classList.add("zoom"),n.classList.add("zoom-image"),e.appendChild(n),o.appendChild(e),o.insertBefore(e,t),n.appendChild(t),n.addEventListener("click",function(){a.innerHTML='<div id="mask-close"></div><img src="'+s+'"><a class="open-tab" href="'+s+'" target="_blank">'+s+"</a>",document.querySelector("html").classList.add("mask-enabled"),a.classList.add("enabled"),a.querySelector("#mask-close").addEventListener("click",function(){a.classList.add("closing"),document.querySelector("html").classList.remove("mask-enabled"),setTimeout(function(){a.classList.remove("closing","enabled"),a.innerHTML=""},200)})})}))},start:function(){e.postContent()},reply:function(){var t=document.querySelector("#topic-reply-form");t&&!t.parentNode.classList.contains("quote")&&e.postContent()}},{init:(e={init:function(){CF.global.collapseQuotes()},postContent:function(){var t=document.getElementById("post-content"),e=t?t.value:"";t&&(t.addEventListener("focus",function(){t.value===e&&(t.value="")}),t.addEventListener("blur",function(){""===t.value&&(t.value=e)}))}}).init,handler:t.handler,start:t.start,startPrivate:t.start,startAnnouncement:t.start,reply:t.reply}}(CF),CF.announcement=CF.topic;
CF.user=function(){"use strict";return{init:{init:function(){CF.global.collapseQuotes()}}.init}}(CF);
//# sourceMappingURL=site.js.map
