{"version":3,"sources":["immediate.js","global.js","init.js","post.js","topic.js","user.js","svgxuse.min.js"],"names":["window","CF","immediate","init","document","querySelector","classList","add","global","methods","accountNavTimer","menuIcon","body","bodyOffset","header","accountNav","addEventListener","getBoundingClientRect","top","Math","abs","height","contains","remove","createElement","setAttribute","innerHTML","appendChild","createTextNode","insertBefore","menu","trigger","position","clientWidth","setTimeout","clearTimeout","e","preventDefault","collapseQuotes","quotes","querySelectorAll","bindButton","quote","expandButton","toggle","i","length","args","source","menuShadow","cloneNode","className","keepClass","removeChild","parentNode","getElementsByTagName","controller","getAttribute","action","view","onreadystatechange","readyState","post","topic","handler","actions","form","postContent","imageZoom","start","startForm","reply","replyForm","mask","forEach","item","zoomWrapper","zoomButton","parent","src","escape","key","close","removeEventListener","getElementById","postContentText","value","startPrivate","startPrivateForm","startAnnouncement","startAnnouncementForm","announcement","user","l","Object","create","d","n","m","t","MutationObserver","k","observe","documentElement","childList","subtree","attributes","disconnect","v","u","a","protocol","c","href","replace","host","XMLHttpRequest","location","withCredentials","XDomainRequest","q","base","useEl","setAttributeNS","hash","hasAttribute","p","b","onload","responseText","style","width","overflow","firstChild","onerror","ontimeout","f","g","w","h","getAttributeNS","split","r","left","right","bottom","open","send","abort"],"mappings":"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","file":"site.js","sourcesContent":["window.CF = {}\n\nCF.immediate = ( function () {\n  'use strict'\n\n  var methods = {\n    init: function () {\n      document.querySelector('html').classList.add('js')\n    }\n  }\n\n  //  Public methods\n  return {\n    init: methods.init\n  }\n\n})(CF)\n\nCF.immediate.init()\n","CF.global = ( function () {\n  'use strict'\n  var methods = {\n\n    init: function () {\n      var body = document.querySelector('body'),\n          bodyOffset = 0,\n          header = document.querySelector('body > header'),\n          accountNav = header.querySelector('nav ul.account'),\n          accountNavTimer,\n          menuIcon\n\n      window.addEventListener('scroll', function () {\n        if ( bodyOffset > body.getBoundingClientRect().top && Math.abs(body.getBoundingClientRect().top) > header.getBoundingClientRect().height && !body.classList.contains('floating-header') ) {\n          body.classList.add('floating-header')\n        // The second half of the statement deals with Safari's bounceback when you scroll past the top of the page\n        } else if ( body.getBoundingClientRect().top >= bodyOffset || Math.abs(body.getBoundingClientRect().top) <= header.getBoundingClientRect().height ) {\n          body.classList.remove('floating-header')\n        }\n\n        bodyOffset = body.getBoundingClientRect().top\n      })\n\n      // Create the main menu icon\n      menuIcon = document.createElement('div')\n\n      menuIcon.setAttribute('id', 'main-menu-icon')\n      menuIcon.innerHTML = '<svg class=\"icon menu\"><use xlink:href=\"themes/default/images/symbols.svg#icon-menu\"></use></svg>'\n      menuIcon.appendChild(document.createTextNode('Menu'))\n      header.insertBefore(menuIcon, header.querySelector('a.home'))\n\n      methods.menu({\n        menu: 'header nav',\n        trigger: '#main-menu-icon',\n        position: 'left'\n      })\n\n      if ( document.body.clientWidth >= 600 ) {\n        accountNav.addEventListener('mouseleave', function () {\n          accountNavTimer = setTimeout( function () {\n            accountNav.classList.remove('active')\n          }, 500)\n        }, false)\n\n        accountNav.addEventListener('mouseover', function () {\n          if ( accountNavTimer ) {\n            clearTimeout(accountNavTimer)\n          }\n        })\n\n        if ( header.classList.contains('authenticated') ) {\n          header.querySelector('a.account').addEventListener('click', function (e) {\n            if ( document.body.clientWidth >= 600 ) { // Just in case they resized the window\n              e.preventDefault()\n            }\n            if ( accountNav.classList.contains('active') ) {\n              accountNav.classList.remove('active')\n            } else {\n              accountNav.classList.add('active')\n            }\n          })\n\n          window.addEventListener('scroll', function () {\n            if ( accountNav.classList.contains('active') ) {\n              accountNav.classList.remove('active')\n            }\n          })\n        }\n      }\n    },\n\n    collapseQuotes: function () {\n      var quotes = document.body.querySelectorAll('section.content > blockquote'),\n          bindButton = function (quote) {\n            var expandButton = document.createElement('a')\n\n            expandButton.setAttribute('href', '#')\n            expandButton.classList.add('expand')\n            expandButton.innerHTML = 'Expand'\n            expandButton.addEventListener('click', function (e) {\n              e.preventDefault()\n              quote.classList.toggle('expanded')\n              if ( expandButton.innerHTML === 'Expand' ) {\n                expandButton.innerHTML = 'Collapse'\n              } else {\n                expandButton.innerHTML = 'Expand'\n              }\n            })\n            quote.classList.add('nested')\n            quote.appendChild(expandButton)\n          }\n\n      for ( var i = 0; i < quotes.length; i++ ) {\n        if ( quotes[i].querySelector('blockquote') ) {\n          bindButton(quotes[i])\n        }\n      }\n    },\n\n    menu: function (args) {\n      var body = document.querySelector('body'),\n          menu,\n          trigger = document.querySelector(args.trigger)\n\n      trigger.addEventListener('click', function () {\n        var source = document.querySelector(args.menu),\n            menuShadow = document.createElement('div')\n\n        menu = source.cloneNode(true)\n        body.appendChild(menu)\n        menuShadow.className = 'menu-shadow'\n        body.appendChild(menuShadow)\n\n        if ( args.keepClass === false ) {\n          menu.className = 'slide-menu ' + args.position\n        } else {\n          menu.className += ' slide-menu ' + args.position\n        }\n\n        if ( body.classList.contains('menu-open') ) {\n          body.classList.remove('menu-open')\n          menu.classList.remove('open')\n          body.classList.add('menu-closing')\n          setTimeout( function () {\n            body.classList.remove('menu-closing')\n          }, 200)\n        } else {\n          body.classList.add('menu-opening')\n          setTimeout( function () {\n            body.classList.remove('menu-opening')\n            body.classList.add('menu-open')\n            menu.classList.add('open')\n          }, 200)\n        }\n\n        menuShadow.addEventListener('click', function () {\n          body.classList.remove('menu-open')\n          menu.classList.remove('open')\n          body.classList.add('menu-closing')\n          setTimeout( function () {\n            body.classList.remove('menu-closing')\n            body.removeChild(menuShadow)\n            if ( menu.parentNode !== null ) {\n              body.removeChild(menu)\n            }\n          }, 200)\n        }, false)\n      }, false)\n    },\n\n    // ajaxFormBinding: function(options) {\n    //   var form = document.querySelector(options.formSelector),\n    //       format = options.format || 'json',\n    //       type = options.type || 'direct'\n\n    //   form.addEventListener('submit', function (e) {\n    //     var request = new XMLHttpRequest(),\n    //         formData = new FormData(form),\n    //         data\n\n    //     e.preventDefault()\n\n    //     request.open('POST', form.action + '/format/' + format + '/type/' + type, true)\n    //     request.setRequestHeader('X-Requested-With', 'XMLHttpRequest')\n    //     // request.setRequestHeader('Content-Type', 'application/json')\n    //     request.send(formData)\n\n    //     request.onreadystatechange = function () {\n    //       console.log('readyState: ' + request.readyState)\n    //       console.log('status: ' + request.status)\n    //     }\n\n    //     request.onload = function () {\n    //       if ( request.status >= 200 && request.status < 400 ) {\n    //         data = JSON.parse(request.responseText)\n    //         console.log(data)\n    //       } else {\n    //         // We reached our target server, but it returned an error\n    //       }\n    //     }\n\n    //     request.onerror = function () {\n    //       // There was a connection error of some sort\n    //     }\n    //   })\n\n    //   // Some browsers don't include the submit button's value when form.submit() is\n    //   // called. This function creates a click listener that duplicates a form's submit\n    //   // button as a hidden field so its name/value can be included in AJAX POSTs,\n    //   // allowing different processing based on different submit buttons.\n    //   form.addEventListener('click', function (e) {\n    //     var input = document.createElement('input'),\n    //         previousActions = form.querySelectorAll('input[type=\"hidden\"].submit-surrogate')\n\n    //     for ( var i = 0; i < previousActions.length; i++ ) {\n    //       form.removeChild(previousActions[i])\n    //     }\n\n    //     if ( e.target.type && e.target.type.toLowerCase() === 'submit' ) {\n    //       input.name = e.target.name\n    //       input.type = 'hidden'\n    //       input.value = e.target.value\n    //       input.className = 'submit-surrogate'\n\n    //       form.appendChild(input)\n    //     }\n    //   })\n    // }\n  }\n\n  //  Public methods\n  return {\n    // ajaxFormBinding: methods.ajaxFormBinding,\n    collapseQuotes: methods.collapseQuotes,\n    init: methods.init,\n    menu: methods.menu\n  }\n\n}(CF))\n","CF.init = function () {\n  'use strict'\n\n  var body = document.getElementsByTagName('body')[0],\n      controller = body.getAttribute('data-controller'),\n      action = body.getAttribute('data-action'),\n      view = body.getAttribute('data-view')\n\n  CF.global.init()\n\n  if ( CF[controller] ) {\n    CF[controller].init()\n\n    if ( CF[controller][action] && typeof CF[controller][action] === 'function' ) {\n      CF[controller][action]()\n\n      if ( CF[controller][action][view] ) {\n        CF[controller][action][view]()\n      }\n    }\n  }\n}\n\ndocument.onreadystatechange = function () {\n  'use strict'\n\n  if ( document.readyState === 'interactive' ) {\n    CF.init()\n  }\n}\n","CF.post = ( function () {\n  'use strict'\n\n  var methods = {\n\n\t\tinit: function () {\n      CF.global.collapseQuotes()\n\t\t},\n\t\t// If the post controller is fired to send the user directly to a post, run the default topic scripts\n\t\ttopic: function () {\n\t\t\tCF.topic.handler()\n\t\t}\n\n  }\n\n\t//\tPublic methods\n\treturn {\n\t\tinit: methods.init,\n\t\ttopic: methods.topic\n\t}\n\n})(CF)","CF.topic = ( function () {\n  'use strict'\n\n  var actions, methods\n\n\tactions = {\n\n    handler: function () {\n      var form = document.querySelector('#quick-reply-form')\n\n      if ( form && !form.parentNode.classList.contains('quote') ) {\n        methods.postContent()\n      }\n      methods.imageZoom()\n    },\n\n    start: function () {\n      // CF.global.ajaxFormBinding({\n      //   formSelector: '#topic-write-form'\n      // })\n      methods.imageZoom()\n      methods.postContent()\n    },\n\n    startForm: function () {\n      methods.imageZoom()\n    },\n\n    reply: function () {\n      // CF.global.ajaxFormBinding({\n      //   formSelector: '#topic-reply-form'\n      // })\n      var form = document.querySelector('#topic-reply-form')\n\n      if ( form && !form.parentNode.classList.contains('quote') ) {\n        methods.postContent()\n      }\n      methods.imageZoom()\n    },\n\n    replyForm: function () {\n      methods.imageZoom()\n    }\n\n\t}\n\n  methods = {\n\n\t\tinit: function () {\n      CF.global.collapseQuotes()\n    },\n    \n    imageZoom: function () {\n      if ( document.body.clientWidth >= 720 ) {\n        var mask = document.createElement('div')\n        mask.setAttribute('id', 'mask')\n        document.body.appendChild(mask)\n\n        document.querySelectorAll('article.post section.content.post p > img, article.post section.content.post > img').forEach( function (item) {\n          var zoomWrapper = document.createElement('span'),\n              zoomButton = document.createElement('span'),\n              parent = item.parentNode,\n              src = item.getAttribute('src')\n          \n          zoomWrapper.classList.add('zoom')\n          parent.appendChild(zoomWrapper)\n          zoomButton.classList.add('zoom-button')\n          zoomButton.innerHTML = '<svg class=\"icon zoom-in\"><use xlink:href=\"themes/default/images/symbols.svg#icon-zoom-in\"></use></svg>'\n          zoomWrapper.appendChild(item)\n          zoomWrapper.appendChild(zoomButton)\n\n          zoomWrapper.addEventListener('click', function () {\n            mask.innerHTML = '<div id=\"mask-close\"><svg class=\"icon close\"><use xlink:href=\"themes/default/images/symbols.svg#icon-close\"></use></svg></div><img src=\"' + src + '\"><a class=\"open-tab\" href=\"' + src + '\" target=\"_blank\">' + src + '<svg class=\"icon arrow-up-right\"><use xlink:href=\"themes/default/images/symbols.svg#icon-arrow-up-right\"></use></svg></a>'\n            document.querySelector('html').classList.add('mask-enabled')\n            mask.classList.add('enabled')\n\n            window.addEventListener('keydown', escape)\n            mask.querySelector('#mask-close').addEventListener('click', function () {\n              close()\n            })\n\n            function escape(e) {\n              if ( e.key === 'Escape' ) {\n                close()\n              }\n            }\n\n            function close() {\n              document.querySelector('html').classList.remove('mask-enabled')\n              mask.classList.remove('enabled')\n              mask.innerHTML = ''\n              window.removeEventListener('keydown', escape)\n            }\n          })\n        })\n      }\n    },\n\n    postContent: function () {\n      var postContent = document.getElementById('post-content'),\n          postContentText = postContent ? postContent.value : ''\n\n      if ( postContent ) {\n        postContent.addEventListener('focus', function () {\n          if ( postContent.value === postContentText ) {\n            postContent.value = ''\n          }\n        })\n        postContent.addEventListener('blur', function () {\n          if ( postContent.value === '' ) {\n            postContent.value = postContentText\n          }\n        })\n      }\n    }\n\n  }\n\n\t//\tPublic methods\n\treturn {\n\t\tinit: methods.init,\n    handler: actions.handler,\n    start: actions.start,\n    startForm: actions.startForm,\n    // Private topic and announcement actions use the same scripts as default topic actions\n    startPrivate: actions.start,\n    startPrivateForm: actions.startForm,\n    startAnnouncement: actions.start,\n    startAnnouncementForm: actions.startForm,\n    reply: actions.reply,\n    replyForm: actions.replyForm\n\t}\n\n})(CF)\n\n\n// For now, the announcement library is the same as the topic library\nCF.announcement = CF.topic\n","CF.user = ( function () {\n  'use strict'\n\n  var methods = {\n\n      init: function () {\n        CF.global.collapseQuotes()\n      }\n\n    }\n\n  //  Public methods\n  return {\n    init: methods.init\n  }\n\n})(CF)\n","/*!\n * @copyright Copyright (c) 2017 IcoMoon.io\n * @license   Licensed under MIT license\n *            See https://github.com/Keyamoon/svgxuse\n * @version   1.2.6\n */\n(function(){if(\"undefined\"!==typeof window&&window.addEventListener){var e=Object.create(null),l,d=function(){clearTimeout(l);l=setTimeout(n,100)},m=function(){},t=function(){window.addEventListener(\"resize\",d,!1);window.addEventListener(\"orientationchange\",d,!1);if(window.MutationObserver){var k=new MutationObserver(d);k.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0});m=function(){try{k.disconnect(),window.removeEventListener(\"resize\",d,!1),window.removeEventListener(\"orientationchange\",\nd,!1)}catch(v){}}}else document.documentElement.addEventListener(\"DOMSubtreeModified\",d,!1),m=function(){document.documentElement.removeEventListener(\"DOMSubtreeModified\",d,!1);window.removeEventListener(\"resize\",d,!1);window.removeEventListener(\"orientationchange\",d,!1)}},u=function(k){function e(a){if(void 0!==a.protocol)var c=a;else c=document.createElement(\"a\"),c.href=a;return c.protocol.replace(/:/g,\"\")+c.host}if(window.XMLHttpRequest){var d=new XMLHttpRequest;var m=e(location);k=e(k);d=void 0===\nd.withCredentials&&\"\"!==k&&k!==m?XDomainRequest||void 0:XMLHttpRequest}return d};var n=function(){function d(){--q;0===q&&(m(),t())}function l(a){return function(){!0!==e[a.base]&&(a.useEl.setAttributeNS(\"http://www.w3.org/1999/xlink\",\"xlink:href\",\"#\"+a.hash),a.useEl.hasAttribute(\"href\")&&a.useEl.setAttribute(\"href\",\"#\"+a.hash))}}function p(a){return function(){var c=document.body,b=document.createElement(\"x\");a.onload=null;b.innerHTML=a.responseText;if(b=b.getElementsByTagName(\"svg\")[0])b.setAttribute(\"aria-hidden\",\n\"true\"),b.style.position=\"absolute\",b.style.width=0,b.style.height=0,b.style.overflow=\"hidden\",c.insertBefore(b,c.firstChild);d()}}function n(a){return function(){a.onerror=null;a.ontimeout=null;d()}}var a,c,q=0;m();var f=document.getElementsByTagName(\"use\");for(c=0;c<f.length;c+=1){try{var g=f[c].getBoundingClientRect()}catch(w){g=!1}var h=(a=f[c].getAttribute(\"href\")||f[c].getAttributeNS(\"http://www.w3.org/1999/xlink\",\"href\")||f[c].getAttribute(\"xlink:href\"))&&a.split?a.split(\"#\"):[\"\",\"\"];var b=\nh[0];h=h[1];var r=g&&0===g.left&&0===g.right&&0===g.top&&0===g.bottom;g&&0===g.width&&0===g.height&&!r?(f[c].hasAttribute(\"href\")&&f[c].setAttributeNS(\"http://www.w3.org/1999/xlink\",\"xlink:href\",a),b.length&&(a=e[b],!0!==a&&setTimeout(l({useEl:f[c],base:b,hash:h}),0),void 0===a&&(h=u(b),void 0!==h&&(a=new h,e[b]=a,a.onload=p(a),a.onerror=n(a),a.ontimeout=n(a),a.open(\"GET\",b),a.send(),q+=1)))):r?b.length&&e[b]&&setTimeout(l({useEl:f[c],base:b,hash:h}),0):void 0===e[b]?e[b]=!0:e[b].onload&&(e[b].abort(),\ndelete e[b].onload,e[b]=!0)}f=\"\";q+=1;d()};var p=function(){window.removeEventListener(\"load\",p,!1);l=setTimeout(n,0)};\"complete\"!==document.readyState?window.addEventListener(\"load\",p,!1):p()}})();\n"]}