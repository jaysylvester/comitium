{"version":3,"sources":["immediate.js","global.js","init.js","post.js","topic.js","user.js","svgxuse.min.js"],"names":["window","CF","immediate","init","document","querySelector","classList","add","global","methods","accountNavTimer","menuIcon","body","bodyOffset","timer","header","accountNav","location","hash","length","setTimeout","addEventListener","contains","getBoundingClientRect","top","Math","abs","height","remove","createElement","setAttribute","innerHTML","appendChild","createTextNode","insertBefore","menu","trigger","position","clientWidth","clearTimeout","e","preventDefault","collapseQuotes","quotes","querySelectorAll","bindButton","quote","expandButton","toggle","i","args","source","menuShadow","cloneNode","className","keepClass","removeChild","parentNode","getElementsByTagName","controller","getAttribute","action","view","onreadystatechange","readyState","post","topic","handler","actions","form","postContent","imageZoom","start","startForm","reply","replyForm","mask","forEach","item","zoomWrapper","zoomButton","parent","src","escape","key","close","removeEventListener","getElementById","postContentText","value","startPrivate","startPrivateForm","startAnnouncement","startAnnouncementForm","announcement","user","l","Object","create","d","n","m","t","MutationObserver","k","observe","documentElement","childList","subtree","attributes","disconnect","v","u","a","protocol","c","href","replace","host","XMLHttpRequest","withCredentials","XDomainRequest","q","base","useEl","setAttributeNS","hasAttribute","p","b","onload","responseText","style","width","overflow","firstChild","onerror","ontimeout","f","g","w","h","getAttributeNS","split","r","left","right","bottom","open","send","abort"],"mappings":"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","file":"site.js","sourcesContent":["window.CF = {}\n\nCF.immediate = ( function () {\n  'use strict'\n\n  var methods = {\n    init: function () {\n      document.querySelector('html').classList.add('js')\n    }\n  }\n\n  //  Public methods\n  return {\n    init: methods.init\n  }\n\n})(CF)\n\nCF.immediate.init()\n","CF.global = ( function () {\n  'use strict'\n  var methods = {\n\n    init: function () {\n      var body = document.querySelector('body'),\n          bodyOffset = 0,\n          timer = 0,\n          header = document.querySelector('body > header'),\n          accountNav = header.querySelector('nav ul.account'),\n          accountNavTimer,\n          menuIcon\n\n      // If the URL contains an intra-page anchor (hash) that takes them directly to a specific post, delay the onset of the scroll listener so the header doesn't pop in\n      if ( window.location.hash.length ) {\n        body.classList.add('hidden-header')\n        timer = 1000\n      }\n      setTimeout( function () {\n        window.addEventListener('scroll', function () {\n          if ( !body.classList.contains('hidden-header') && bodyOffset > body.getBoundingClientRect().top && Math.abs(body.getBoundingClientRect().top) > header.getBoundingClientRect().height ) {\n            body.classList.add('hidden-header')\n          // The minus 20 pixels is to keep the header from popping in with only slight movements (happens frequently when using touchscreens and touch input devices)\n          // The second half of the statement deals with Safari's bounceback when you scroll past the top of the page\n          } else if ( body.getBoundingClientRect().top - 20 >= bodyOffset || Math.abs(body.getBoundingClientRect().top) <= header.getBoundingClientRect().height ) {\n            body.classList.remove('hidden-header')\n          }\n\n          bodyOffset = body.getBoundingClientRect().top\n        })\n      }, timer)\n      \n      // Create the main menu icon\n      menuIcon = document.createElement('div')\n\n      menuIcon.setAttribute('id', 'main-menu-icon')\n      menuIcon.innerHTML = '<svg class=\"icon menu\"><use xlink:href=\"themes/default/images/symbols.svg#icon-menu\"></use></svg>'\n      menuIcon.appendChild(document.createTextNode('Menu'))\n      header.insertBefore(menuIcon, header.querySelector('a.home'))\n\n      methods.menu({\n        menu: 'header nav',\n        trigger: '#main-menu-icon',\n        position: 'left'\n      })\n\n      if ( document.body.clientWidth >= 600 ) {\n        accountNav.addEventListener('mouseleave', function () {\n          accountNavTimer = setTimeout( function () {\n            accountNav.classList.remove('active')\n          }, 500)\n        }, false)\n\n        accountNav.addEventListener('mouseover', function () {\n          if ( accountNavTimer ) {\n            clearTimeout(accountNavTimer)\n          }\n        })\n\n        if ( header.classList.contains('authenticated') ) {\n          header.querySelector('a.account').addEventListener('click', function (e) {\n            if ( document.body.clientWidth >= 600 ) { // Just in case they resized the window\n              e.preventDefault()\n            }\n            if ( accountNav.classList.contains('active') ) {\n              accountNav.classList.remove('active')\n            } else {\n              accountNav.classList.add('active')\n            }\n          })\n\n          window.addEventListener('scroll', function () {\n            if ( accountNav.classList.contains('active') ) {\n              accountNav.classList.remove('active')\n            }\n          })\n        }\n      }\n    },\n\n    collapseQuotes: function () {\n      var quotes = document.body.querySelectorAll('section.content > blockquote'),\n          bindButton = function (quote) {\n            var expandButton = document.createElement('a')\n\n            expandButton.setAttribute('href', '#')\n            expandButton.classList.add('expand')\n            expandButton.innerHTML = 'Expand'\n            expandButton.addEventListener('click', function (e) {\n              e.preventDefault()\n              quote.classList.toggle('expanded')\n              if ( expandButton.innerHTML === 'Expand' ) {\n                expandButton.innerHTML = 'Collapse'\n              } else {\n                expandButton.innerHTML = 'Expand'\n              }\n            })\n            quote.classList.add('nested')\n            quote.appendChild(expandButton)\n          }\n\n      for ( var i = 0; i < quotes.length; i++ ) {\n        if ( quotes[i].querySelector('blockquote') ) {\n          bindButton(quotes[i])\n        }\n      }\n    },\n\n    menu: function (args) {\n      var body = document.querySelector('body'),\n          menu,\n          trigger = document.querySelector(args.trigger)\n\n      trigger.addEventListener('click', function () {\n        var source = document.querySelector(args.menu),\n            menuShadow = document.createElement('div')\n\n        menu = source.cloneNode(true)\n        body.appendChild(menu)\n        menuShadow.className = 'menu-shadow'\n        body.appendChild(menuShadow)\n\n        if ( args.keepClass === false ) {\n          menu.className = 'slide-menu ' + args.position\n        } else {\n          menu.className += ' slide-menu ' + args.position\n        }\n\n        if ( body.classList.contains('menu-open') ) {\n          body.classList.remove('menu-open')\n          menu.classList.remove('open')\n          body.classList.add('menu-closing')\n          setTimeout( function () {\n            body.classList.remove('menu-closing')\n          }, 200)\n        } else {\n          body.classList.add('menu-opening')\n          setTimeout( function () {\n            body.classList.remove('menu-opening')\n            body.classList.add('menu-open')\n            menu.classList.add('open')\n          }, 200)\n        }\n\n        menuShadow.addEventListener('click', function () {\n          body.classList.remove('menu-open')\n          menu.classList.remove('open')\n          body.classList.add('menu-closing')\n          setTimeout( function () {\n            body.classList.remove('menu-closing')\n            body.removeChild(menuShadow)\n            if ( menu.parentNode !== null ) {\n              body.removeChild(menu)\n            }\n          }, 200)\n        }, false)\n      }, false)\n    },\n\n    // ajaxFormBinding: function(options) {\n    //   var form = document.querySelector(options.formSelector),\n    //       format = options.format || 'json',\n    //       type = options.type || 'direct'\n\n    //   form.addEventListener('submit', function (e) {\n    //     var request = new XMLHttpRequest(),\n    //         formData = new FormData(form),\n    //         data\n\n    //     e.preventDefault()\n\n    //     request.open('POST', form.action + '/format/' + format + '/type/' + type, true)\n    //     request.setRequestHeader('X-Requested-With', 'XMLHttpRequest')\n    //     // request.setRequestHeader('Content-Type', 'application/json')\n    //     request.send(formData)\n\n    //     request.onreadystatechange = function () {\n    //       console.log('readyState: ' + request.readyState)\n    //       console.log('status: ' + request.status)\n    //     }\n\n    //     request.onload = function () {\n    //       if ( request.status >= 200 && request.status < 400 ) {\n    //         data = JSON.parse(request.responseText)\n    //         console.log(data)\n    //       } else {\n    //         // We reached our target server, but it returned an error\n    //       }\n    //     }\n\n    //     request.onerror = function () {\n    //       // There was a connection error of some sort\n    //     }\n    //   })\n\n    //   // Some browsers don't include the submit button's value when form.submit() is\n    //   // called. This function creates a click listener that duplicates a form's submit\n    //   // button as a hidden field so its name/value can be included in AJAX POSTs,\n    //   // allowing different processing based on different submit buttons.\n    //   form.addEventListener('click', function (e) {\n    //     var input = document.createElement('input'),\n    //         previousActions = form.querySelectorAll('input[type=\"hidden\"].submit-surrogate')\n\n    //     for ( var i = 0; i < previousActions.length; i++ ) {\n    //       form.removeChild(previousActions[i])\n    //     }\n\n    //     if ( e.target.type && e.target.type.toLowerCase() === 'submit' ) {\n    //       input.name = e.target.name\n    //       input.type = 'hidden'\n    //       input.value = e.target.value\n    //       input.className = 'submit-surrogate'\n\n    //       form.appendChild(input)\n    //     }\n    //   })\n    // }\n  }\n\n  //  Public methods\n  return {\n    // ajaxFormBinding: methods.ajaxFormBinding,\n    collapseQuotes: methods.collapseQuotes,\n    init: methods.init,\n    menu: methods.menu\n  }\n\n}(CF))\n","CF.init = function () {\n  'use strict'\n\n  var body = document.getElementsByTagName('body')[0],\n      controller = body.getAttribute('data-controller'),\n      action = body.getAttribute('data-action'),\n      view = body.getAttribute('data-view')\n\n  CF.global.init()\n\n  if ( CF[controller] ) {\n    CF[controller].init()\n\n    if ( CF[controller][action] && typeof CF[controller][action] === 'function' ) {\n      CF[controller][action]()\n\n      if ( CF[controller][action][view] ) {\n        CF[controller][action][view]()\n      }\n    }\n  }\n}\n\ndocument.onreadystatechange = function () {\n  'use strict'\n\n  if ( document.readyState === 'interactive' ) {\n    CF.init()\n  }\n}\n","CF.post = ( function () {\n  'use strict'\n\n  var methods = {\n\n\t\tinit: function () {\n      CF.global.collapseQuotes()\n\t\t},\n\t\t// If the post controller is fired to send the user directly to a post, run the default topic scripts\n\t\ttopic: function () {\n\t\t\tCF.topic.handler()\n\t\t}\n\n  }\n\n\t//\tPublic methods\n\treturn {\n\t\tinit: methods.init,\n\t\ttopic: methods.topic\n\t}\n\n})(CF)","CF.topic = ( function () {\n  'use strict'\n\n  var actions, methods\n\n\tactions = {\n\n    handler: function () {\n      var form = document.querySelector('#quick-reply-form')\n\n      if ( form && !form.parentNode.classList.contains('quote') ) {\n        methods.postContent()\n      }\n      methods.imageZoom()\n    },\n\n    start: function () {\n      // CF.global.ajaxFormBinding({\n      //   formSelector: '#topic-write-form'\n      // })\n      methods.imageZoom()\n      methods.postContent()\n    },\n\n    startForm: function () {\n      methods.imageZoom()\n    },\n\n    reply: function () {\n      // CF.global.ajaxFormBinding({\n      //   formSelector: '#topic-reply-form'\n      // })\n      var form = document.querySelector('#topic-reply-form')\n\n      if ( form && !form.parentNode.classList.contains('quote') ) {\n        methods.postContent()\n      }\n      methods.imageZoom()\n    },\n\n    replyForm: function () {\n      methods.imageZoom()\n    }\n\n\t}\n\n  methods = {\n\n\t\tinit: function () {\n      CF.global.collapseQuotes()\n    },\n    \n    imageZoom: function () {\n      if ( document.body.clientWidth >= 720 ) {\n        var mask = document.createElement('div')\n        mask.setAttribute('id', 'mask')\n        document.body.appendChild(mask)\n\n        document.querySelectorAll('article.post section.content.post p > img, article.post section.content.post > img').forEach( function (item) {\n          var zoomWrapper = document.createElement('span'),\n              zoomButton = document.createElement('span'),\n              parent = item.parentNode,\n              src = item.getAttribute('src')\n          \n          zoomWrapper.classList.add('zoom')\n          parent.appendChild(zoomWrapper)\n          zoomButton.classList.add('zoom-button')\n          zoomButton.innerHTML = '<svg class=\"icon zoom-in\"><use xlink:href=\"themes/default/images/symbols.svg#icon-zoom-in\"></use></svg>'\n          zoomWrapper.appendChild(item)\n          zoomWrapper.appendChild(zoomButton)\n\n          zoomWrapper.addEventListener('click', function () {\n            mask.innerHTML = '<div id=\"mask-close\"><svg class=\"icon close\"><use xlink:href=\"themes/default/images/symbols.svg#icon-close\"></use></svg></div><img src=\"' + src + '\"><a class=\"open-tab\" href=\"' + src + '\" target=\"_blank\">' + src + '<svg class=\"icon arrow-up-right\"><use xlink:href=\"themes/default/images/symbols.svg#icon-arrow-up-right\"></use></svg></a>'\n            document.querySelector('html').classList.add('mask-enabled')\n            mask.classList.add('enabled')\n\n            window.addEventListener('keydown', escape)\n            mask.querySelector('#mask-close').addEventListener('click', function () {\n              close()\n            })\n\n            function escape(e) {\n              if ( e.key === 'Escape' ) {\n                close()\n              }\n            }\n\n            function close() {\n              document.querySelector('html').classList.remove('mask-enabled')\n              mask.classList.remove('enabled')\n              mask.innerHTML = ''\n              window.removeEventListener('keydown', escape)\n            }\n          })\n        })\n      }\n    },\n\n    postContent: function () {\n      var postContent = document.getElementById('post-content'),\n          postContentText = postContent ? postContent.value : ''\n\n      if ( postContent ) {\n        postContent.addEventListener('focus', function () {\n          if ( postContent.value === postContentText ) {\n            postContent.value = ''\n          }\n        })\n        postContent.addEventListener('blur', function () {\n          if ( postContent.value === '' ) {\n            postContent.value = postContentText\n          }\n        })\n      }\n    }\n\n  }\n\n\t//\tPublic methods\n\treturn {\n\t\tinit: methods.init,\n    handler: actions.handler,\n    start: actions.start,\n    startForm: actions.startForm,\n    // Private topic and announcement actions use the same scripts as default topic actions\n    startPrivate: actions.start,\n    startPrivateForm: actions.startForm,\n    startAnnouncement: actions.start,\n    startAnnouncementForm: actions.startForm,\n    reply: actions.reply,\n    replyForm: actions.replyForm\n\t}\n\n})(CF)\n\n\n// For now, the announcement library is the same as the topic library\nCF.announcement = CF.topic\n","CF.user = ( function () {\n  'use strict'\n\n  var methods = {\n\n      init: function () {\n        CF.global.collapseQuotes()\n      }\n\n    }\n\n  //  Public methods\n  return {\n    init: methods.init\n  }\n\n})(CF)\n","/*!\n * @copyright Copyright (c) 2017 IcoMoon.io\n * @license   Licensed under MIT license\n *            See https://github.com/Keyamoon/svgxuse\n * @version   1.2.6\n */\n(function(){if(\"undefined\"!==typeof window&&window.addEventListener){var e=Object.create(null),l,d=function(){clearTimeout(l);l=setTimeout(n,100)},m=function(){},t=function(){window.addEventListener(\"resize\",d,!1);window.addEventListener(\"orientationchange\",d,!1);if(window.MutationObserver){var k=new MutationObserver(d);k.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0});m=function(){try{k.disconnect(),window.removeEventListener(\"resize\",d,!1),window.removeEventListener(\"orientationchange\",\nd,!1)}catch(v){}}}else document.documentElement.addEventListener(\"DOMSubtreeModified\",d,!1),m=function(){document.documentElement.removeEventListener(\"DOMSubtreeModified\",d,!1);window.removeEventListener(\"resize\",d,!1);window.removeEventListener(\"orientationchange\",d,!1)}},u=function(k){function e(a){if(void 0!==a.protocol)var c=a;else c=document.createElement(\"a\"),c.href=a;return c.protocol.replace(/:/g,\"\")+c.host}if(window.XMLHttpRequest){var d=new XMLHttpRequest;var m=e(location);k=e(k);d=void 0===\nd.withCredentials&&\"\"!==k&&k!==m?XDomainRequest||void 0:XMLHttpRequest}return d};var n=function(){function d(){--q;0===q&&(m(),t())}function l(a){return function(){!0!==e[a.base]&&(a.useEl.setAttributeNS(\"http://www.w3.org/1999/xlink\",\"xlink:href\",\"#\"+a.hash),a.useEl.hasAttribute(\"href\")&&a.useEl.setAttribute(\"href\",\"#\"+a.hash))}}function p(a){return function(){var c=document.body,b=document.createElement(\"x\");a.onload=null;b.innerHTML=a.responseText;if(b=b.getElementsByTagName(\"svg\")[0])b.setAttribute(\"aria-hidden\",\n\"true\"),b.style.position=\"absolute\",b.style.width=0,b.style.height=0,b.style.overflow=\"hidden\",c.insertBefore(b,c.firstChild);d()}}function n(a){return function(){a.onerror=null;a.ontimeout=null;d()}}var a,c,q=0;m();var f=document.getElementsByTagName(\"use\");for(c=0;c<f.length;c+=1){try{var g=f[c].getBoundingClientRect()}catch(w){g=!1}var h=(a=f[c].getAttribute(\"href\")||f[c].getAttributeNS(\"http://www.w3.org/1999/xlink\",\"href\")||f[c].getAttribute(\"xlink:href\"))&&a.split?a.split(\"#\"):[\"\",\"\"];var b=\nh[0];h=h[1];var r=g&&0===g.left&&0===g.right&&0===g.top&&0===g.bottom;g&&0===g.width&&0===g.height&&!r?(f[c].hasAttribute(\"href\")&&f[c].setAttributeNS(\"http://www.w3.org/1999/xlink\",\"xlink:href\",a),b.length&&(a=e[b],!0!==a&&setTimeout(l({useEl:f[c],base:b,hash:h}),0),void 0===a&&(h=u(b),void 0!==h&&(a=new h,e[b]=a,a.onload=p(a),a.onerror=n(a),a.ontimeout=n(a),a.open(\"GET\",b),a.send(),q+=1)))):r?b.length&&e[b]&&setTimeout(l({useEl:f[c],base:b,hash:h}),0):void 0===e[b]?e[b]=!0:e[b].onload&&(e[b].abort(),\ndelete e[b].onload,e[b]=!0)}f=\"\";q+=1;d()};var p=function(){window.removeEventListener(\"load\",p,!1);l=setTimeout(n,0)};\"complete\"!==document.readyState?window.addEventListener(\"load\",p,!1):p()}})();\n"]}