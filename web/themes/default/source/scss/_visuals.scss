/////////////////////////
////      fonts      ////
/////////////////////////

@import 'https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,600,700|Titillium+Web:400,600';



//////////////////////
////    colors    ////
//////////////////////
body {
  @include bodyFont;
  color: white;
  background-color: hsl(227,18%,18%);

  // Navigation highlighting
  &[data-controller="index"] nav li.discussions a,
  &[data-controller="discussions"] nav li.discussions a,
  &[data-controller="discussion"] nav li.discussions a,
  &[data-controller="announcements"] nav li.discussions a,
  &[data-controller="announcement"] nav li.discussions a,
  &[data-controller="topic"][data-view="topic"] nav li.discussions a,
  &[data-controller="subscriptions"][data-view="subscriptions"] nav li.subscriptions a,
  &[data-controller="topic"][data-view="private-topic"] nav li.private-topics a,
  &[data-controller="topic"][data-view="start-private"] nav li.private-topics a,
  &[data-controller="private-topics"] nav li.private-topics a,
  &[data-controller="sign-in"] nav li.sign-in a,
  &[data-controller="register"] nav li.register a,
  &[data-controller="account"] nav li.account a,
  &[data-controller="about"] nav li.about a,
  &[data-controller="help"] nav li.help a {
    background-color: hsl(227,18%, 26%);
  }
}

html.cssanimations.csstransforms span.loading-indicator {
  border-top-color: #666;
  border-right-color: #c8c8c8;
  border-bottom-color: #666;
  border-left-color: #666;
}

a {
  color: hsl(227,41%,80%);

  &:hover {
    text-decoration: underline;
  }
}

p {
  color: hsl(0,0%,85%);
}

time {
  color: rgb(191,191,191);
}

a.home {
  svg {
    fill: hsl(0, 0%, 91%);
  }
}

body {
  > header {
    background-color: hsl(227,18%,16%);
    box-shadow: 0 0 1.6vw hsl(227,0%,10%);

    nav {
      li {
        a {
          color: rgb(204, 216, 255);

          &:hover {
            text-decoration: none;
          }
        }
      }
    }

    section.status {
      a.private-topics {
        &::before {
          color: hsl(227,100%,90%);
        }
      }
    }
  }

  &.floating-header-active > header {
    background-color: hsla(227,18%,16%,0.95);
  }
}

main {
	background-image: linear-gradient(180deg, hsl(227,18%,19%) 0, hsl(227,18%,19%) 100px, hsl(227,18%,18%) 101px);
}

// The menu button and sliding nav are used on mobile only. Much easier to limit
// here than to overwrite within the 600px media query later.
@media only screen and (max-width: 599px) {
  .slide-menu {
    background-color: hsl(227,18%, 18%);
  }

  .menu-shadow {
    background-color: hsla(227,1%,0%,0.5);
  }
}

nav.breadcrumbs {
  li {
    &::before {
      border-right-color: hsl(227,18%,35%);
    }
    &::after {
      border-left-color: hsl(227,18%,35%);
    }
  }
  a {
    color: hsl(227,23%,60%);
  }
}

main {
  > header {
    background-image: linear-gradient(180deg, hsl(227,18%,19%) 0, hsl(227,18%,25%));
    border-bottom: 1px solid hsl(227,18%,16%);
  }
}

section {
  &.summary {
    > p {
      color: rgb(191,191,191);
    }
  }

  &.notice {
    background-color: hsl(227,18%,18%);
    border-color: hsl(227,18%,40%);

    &::before {
      color: hsl(227,100%,90%);
    }

    &.error,
    &.locked,
    &.banned {
      background: hsl(0,50%,50%);

      &::before,
      a {
        color: white;
      }
    }
  }

  &.announcements {
    background: hsl(227,18%,20%);
    border-bottom: 1px solid hsl(227,18%,14%);
  }

  &.content {
    color: hsl(0,0%,85%);

    blockquote {
      color: #d2d2d2;
      background-color: hsl(227,18%,24%);
      border-color: hsl(227,18%,50%);

      a.expand {
        &:hover {
          background: hsl(227,18%,30%);
        }
      }
    }
  }
}

nav.pagination {
  ul {
    color: #A5B2D9;
  }
  li {
    &.current {
      a {
        color: hsl(227,41%,13%);
        background-image: linear-gradient(180deg,hsl(227,64%,86%),hsl(227,32%,68%) 98%);
      }
    }
  }
}

// Topic counts for forums, post counts for topics
dl.content-stats {
  background: hsla(227,18%,26%,1);
  color: hsl(227,18%,80%);
}

article {
  border-color: hsl(227,18%,25%);

  &.unread,
  &.updated {
    &::before {
      background-color: hsl(227,100%, 90%);
    }
  }
}

h1 {
  color: hsl(0, 0%, 85%);
}

h2 {
  color: hsl(0,0%,80%);
}

footer {
  background-color: hsl(227,18%, 16%);
  border-top: 1px solid hsl(227,18%,14%);

  section.copyright {
    p {
      color: hsl(227,18%,60%);
    }
    a {
      color: hsl(227,18%,60%);
    }
  }
}



/////////////////////////
////      forms      ////
/////////////////////////

form {
  label {
    color: white;
  }
  p.label-note {
    color: hsla(0,0%,100%,0.5);
  }
  input,
  select,
  textarea {
    border-color: hsl(227,18%,30%);
    background-color: hsl(227,18%,32%);

    &:focus {
      outline: none;
      border-color: hsla(227,18%,55%,1);
      background-color: hsla(227,18%,34%,1);
    }
  }

  input[type="checkbox"] {
    &:checked {
      &::after {
        color: hsl(227,100%,90%);
      }
    }
  }

  input[type="radio"] {
    &:checked {
      &::after {
        background-color: hsl(227,100%, 90%);
      }
    }
  }
}

::placeholder {
  color: hsla(0,0%,100%,0.5);
}


/////////////////////////
////     tables      ////
/////////////////////////

table {
  color: hsl(0,0%,85%);

  th,
  td {
    border-color: hsl(227,18%,50%);
  }

  th {
    background: hsl(227,18%,30%);
  }
}

// Screens wider than 600px
@media only screen and (min-width: 600px) {

  body {
    & > header {
      nav {
        li {
          a {
            &:hover {
              background-color: hsl(227,18%, 27%);
            }
          }
        }
      }
    }

  }

  html.js {
    body {
      & > header {
        &.authenticated {
          nav {
            ul.account {
              background-color: hsla(227,18%,16%,.95);
              box-shadow: 0 2px 6px hsl(227,0%,10%);

              &::after {
                background-color: hsl(227,18%,16%);
              }
            }
          }
        }
      }
    }
  }

}

// Screens wider than 720px
@media only screen and (min-width: 720px) {
  body {
    > header {
      box-shadow: 0 0 8px hsl(227,0%,10%);

      nav {
        li {
          a {
            &:hover {
              background-color: hsl(227,18%, 27%);
            }
          }
        }
      }
    }
  }
}


////////////////////////////
//   discussion pattern   //
////////////////////////////

body[data-controller="discussion"][data-view="discussion"],
body[data-controller="announcements"][data-view="announcements"],
body[data-controller="private-topics"][data-view="private-topics"],
body[data-controller="subscriptions"][data-view="subscriptions"] {

  main > p {
    color: white;
  }
  article.topic {
    dl.byline {
      dd.author {
        color: #a5b2d9;
      }
    }
  }

  @media only screen and (min-width: 720px) {
    section.topics {
      article.topic {
        dd.date {
          &::before {
            color: #bfbfbf;
          }
        }
      }
    }
  }

}

///////////////////
//  index view   //
///////////////////

body[data-view="index"] {
  time {
    color: #acacac;
  }
}

//////////////////////////////
//        post styles       //
//////////////////////////////

// Global post styles
article.post {
  background-color: hsl(227,18%,22%);
}

//////////////////////
//  topic patterns  //
//////////////////////

body[data-controller="topic"][data-view="topic"],
body[data-controller="topic"][data-view="private-topic"],
body[data-controller="announcement"][data-view="announcement"] {

  section.summary {
    dl.byline {
      dd {
        color: hsl(227,41%,80%);

        &.date {
          color: hsl(0,0%,67%);
        }
      }
    }
  }

  section.posts {
    > nav {
      background: hsl(227,18%,22%);
    }
  }

  article.post {
    header {
      background: hsl(227,18%,18%);

      dd {
        &.time {
          color: #acacac;
        }
      }
    }
    section.signature {
      color: hsl(0,0%,70%);
      background-color: hsl(227,18%,24%);

      section.staff {
        background-position-y: bottom;
        background-repeat: no-repeat;
        
        &.moderator {
          background-image: url(/themes/default/images/moderator.png);
          background-size: 16vw;
          background-position-x: -3vw;
        }
        &.administrator {
          background-image: url(/themes/default/images/administrator.png);
          background-size: 20vw;
          background-position-x: -3.5vw;
        }
      }
      section.content {
        p {
          color: hsl(0,0%,80%);
        }
      }
    }
  }

  @media only screen and (min-width: 600px) {
    article.post {
      header {
        dl {
          background-color: hsl(227,18%,22%);
          
          &::before {
            background-color: hsl(227,18%,22%);
          }
          &::after {
            background: hsl(227,18%,28%);
          }
        }
      }
      section.content.post {
        background-color: hsl(227,18%,22%);
      }
      nav.actions {
        background-color: hsl(227,18%,22%);
      }
      section.signature {
        border-color: hsl(227,18%,18%);
        background-color: hsl(227,18%,24%);

        section.staff {          
          &.moderator {
            background-size: 11vw;
            background-position-x: -2vw;
          }
          &.administrator {
            background-size: 14vw;
            background-position-x: -3vw;
          }
        }
      }
    }
  }

  @media only screen and (min-width: 720px) {
    article.post {
      section.signature {
        section.staff {
          &.moderator {
            background-size: 9.2rem;
            background-position: -1.4rem 0.8rem;
          }
          &.administrator {
            background-position-x: -2.2rem;
            background-size: 10rem;
          }
        }
      }
    }
  }

  @media only screen and (min-width: 960px) {
    // First page
    &[data-page="1"] {
      article.post:first-of-type {
        section.signature {
          section.staff {
            &.moderator {
              background-position-x: 0;
            }
            &.administrator {
              padding-left: 10rem;
              background-position-x: 0;
            }
          }
        }
      }
    }
  }
}

// Private topic view
body[data-controller="topic"][data-view="private-topic"] {
  ul.participants {
    li {
      &:nth-child(n+2) {
        &::before {
          color: hsl(0,0%,85%);
        }
      }
      &:last-child {
        &::before {
          color: hsl(0,0%,85%);
        }
        &::after {
          color: hsl(0,0%,85%);
        }
      }
    }
  }
}

///////////////////
//   user view   //
///////////////////

body[data-view="user"] {

  main {
    // background: hsl(227,18%,96%);
  }

  article.post {
    header {
      background: hsl(227,18%,18%);
    }
  }

  @media only screen and (min-width: 600px) {
    
    article.post {
      border: initial;

      header {
        background: hsl(227,18%,24%);
      }
      section.content {
        background-color: hsl(227,18%,22%);
      }
      nav.actions {
        background-color: hsl(227,18%,22%);
      }
    }

  }

}